data ApiResponse = ApiResponseError Text
  | ApiResponseOk Text
  | ApiResponseNotFound
  deriving (Eq, Show)

getApiData :: Endpoint () () ApiResponse
getApiData = Endpoint
  { method = GET
  , path = const $ fold
      [ "/api"
      , "/data"
      ]
  , requestBody = const L.empty
  , responseBody = \case
      200 -> \bs -> bimap (ParseError 200) ApiResponseOk $ A.eitherDecode bs
      404 -> \bs -> bimap (ParseError 404) ApiResponseNotFound $ A.eitherDecode bs
      Default -> \status bs -> bimap (ParseError status) ApiResponseError . A.eitherDecode
  }
